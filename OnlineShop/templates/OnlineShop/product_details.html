{% extends "OnlineShop/base/base.html" %}
{% block title %}{{ product.name }} - Online Shop{% endblock %}

{% block hero %}
<header class="hero hero-sm">
  <div class="container text-center">
    <h1 class="hero-title hero-title-sm">{{ product.name }}</h1>
    <p class="hero-subtitle">Product details & quick order</p>
  </div>
</header>
{% endblock %}

{% block content %}

<div class="mb-3">
  <a href="{% url 'index' %}" class="link-dark text-decoration-none small">
    <i class="bi bi-arrow-left"></i> Back to products
  </a>
</div>

<div class="row g-4 align-items-start">
  <div class="col-12 col-lg-6">
    <div class="card soft-card p-3">
      <div class="ratio ratio-4x3 product-image-wrap">
        <img src="{{ product.get_absolute_url }}" class="object-fit-contain" alt="{{ product.name }}">
      </div>
    </div>
  </div>

  <div class="col-12 col-lg-6">
    <div class="card soft-card">
      <div class="card-body p-4">
        <div class="d-flex align-items-center justify-content-between gap-2 flex-wrap">
          <div class="text-muted small">
            <i class="bi bi-star-fill text-warning"></i> Rating: 124
          </div>
          {% if product.discount > 0 %}
            <span class="badge bg-dark">Sale -{{ product.discount }}%</span>
          {% endif %}
        </div>

        <h2 class="fw-bold mt-2 mb-2">{{ product.name }}</h2>

        <div class="d-flex align-items-baseline gap-2 mb-3">
          {% if product.discount > 0 %}
            <span class="text-muted text-decoration-line-through">${{ product.price }}</span>
            <span class="fs-4 fw-bold">${{ product.discounted_price }}</span>
          {% else %}
            <span class="fs-4 fw-bold">${{ product.price }}</span>
          {% endif %}
        </div>

        <p class="text-muted mb-4">{{ product.description }}</p>

        <div class="divider my-4"></div>

        <h5 class="fw-bold mb-3">Place an order</h5>
        <form method="post" action="">
          {% csrf_token %}
          <div class="row g-3">
            <div class="col-12">
              <label class="form-label">Your name</label>
              <input type="text" class="form-control" placeholder="John Doe" name="name">
            </div>
            <div class="col-12">
              <label class="form-label">Your phone</label>
              <input type="text" class="form-control" placeholder="+7 (___) ___-__-__" name="phone">
            </div>
            <div class="col-12 d-grid">
              <button type="submit" class="btn btn-dark">
                <i class="bi bi-send"></i> Send
              </button>
            </div>
            <div class="col-12">
              <div class="small text-muted">
                By sending you agree to be contacted about your order.
              </div>
            </div>
          </div>
        </form>

      </div>
    </div>
  </div>
</div>

<div class="row g-4 mt-4">
  <div class="col-12 col-lg-7">
    <div class="card soft-card">
      <div class="card-body p-4">
        <div class="d-flex align-items-center justify-content-between flex-wrap gap-2 mb-3">
          <h4 class="fw-bold mb-0">Latest comments</h4>
          <span class="text-muted small">Demo block (можно подключить модель Comments)</span>
        </div>

        <!-- Demo comments -->
        <div class="comment">
          <div class="comment-head">
            <div class="avatar">JD</div>
            <div>
              <div class="fw-bold">John Doe</div>
              <div class="text-muted small">2 hours ago</div>
            </div>
          </div>
          <div class="text-muted mt-2">
            Nice product, delivery was fast. Would buy again.
          </div>
        </div>

        <div class="comment">
          <div class="comment-head">
            <div class="avatar">AM</div>
            <div>
              <div class="fw-bold">Alice Moon</div>
              <div class="text-muted small">1 day ago</div>
            </div>
          </div>
          <div class="text-muted mt-2">
            Good quality for this price, especially with discount.
          </div>
        </div>

      </div>
    </div>
  </div>

  <div class="col-12 col-lg-5">
    <div class="card soft-card">
      <div class="card-body p-4">
        <h4 class="fw-bold mb-3">Add comment</h4>
        <form method="post" action="">
          {% csrf_token %}
          <div class="mb-3">
            <label class="form-label">Your name</label>
            <input type="text" class="form-control" placeholder="Your name" name="comment_name">
          </div>
          <div class="mb-3">
            <label class="form-label">Your email</label>
            <input type="email" class="form-control" placeholder="name@example.com" name="comment_email">
          </div>
          <div class="mb-3">
            <label class="form-label">Your comment</label>
            <textarea class="form-control" rows="5" placeholder="Write here..." name="comment_text"></textarea>
          </div>
          <div class="d-grid">
            <button class="btn btn-outline-dark" type="submit">
              <i class="bi bi-chat-dots"></i> Send comment
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>

{% endblock %}